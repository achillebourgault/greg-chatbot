export type UiLanguage = "en" | "fr";

export const DEFAULT_UI_LANGUAGE: UiLanguage = "en";

type DictValue = string | ((params: Record<string, unknown>) => string);

type Dict = Record<string, DictValue>;

const DICT: Record<UiLanguage, Dict> = {
	en: {
		"app.name": "Greg",
		"app.subtitle": "AI agent",
		"actions.usages": "Usages",
		"actions.settings": "Settings",
		"actions.newChat": "New chat",
		"actions.search": "Search",
		"actions.copy": "Copy",
		"actions.copied": "Copied",
		"actions.cancel": "Cancel",
		"actions.restore": "Restore",
		"actions.deleteAll": "Delete all chats",
		"actions.exportChat": "Export chat (Markdown)",
		"actions.restartFromHere": "Restart from here",
		"actions.stop": "Stop",
		"sidebar.searchPlaceholder": "Search conversations…",
		"sidebar.empty": "No conversations",
		"sidebar.emptySearch": "No conversations found",
		"sidebar.untitled": "Untitled",
		"sidebar.group.today": "Today",
		"sidebar.group.yesterday": "Yesterday",
		"sidebar.group.thisWeek": "This week",
		"sidebar.group.older": "Older",
		"sidebar.archived": "Archived",
		"sidebar.show": "Show",
		"sidebar.hide": "Hide",
		"sidebar.lastUpdated": ({ minutes, hours, days }) => {
			if (typeof minutes === "number") return `${minutes}m ago`;
			if (typeof hours === "number") return `${hours}h ago`;
			if (typeof days === "number") return `${days}d ago`;
			return "";
		},
		"composer.model": "Model",
		"composer.placeholder": "Write a message to Greg…",
		"composer.hint.send": "send",
		"composer.hint.newline": "newline",
		"composer.thinking": "Greg is thinking…",
		"thread.welcome.title": "Hey — I'm Greg.",
		"thread.welcome.subtitle": "Your personal agent powered by AI. Ask anything, or give me a task.",
		"settings.title": "Settings",
		"settings.subtitle": "Tune how Greg behaves",
		"settings.language": "Interface language",
		"settings.personality": "Personality",
		"settings.personality.help": "Pick one option per category. You can change it anytime.",
		"settings.tone": "Tone",
		"settings.verbosity": "Verbosity",
		"settings.guidance": "Guidance",
		"settings.playfulness": "Playfulness",
		"settings.guidance.neutral.title": "Neutral",
		"settings.guidance.neutral.desc": "Stays efficient; asks only when needed.",
		"settings.guidance.coach.title": "Coach",
		"settings.guidance.coach.desc": "Guides step-by-step and checks progress.",
		"settings.instructions": "Custom instructions (optional)",
		"settings.instructions.help": "These are appended to Greg's mandatory base instructions.",
		"settings.save": "Save",
		"settings.reset": "Clear",
		"settings.data.title": "Data",
		"settings.data.subtitle": "Manage local conversations",
		"settings.archiveAll.help": "Removes all chats from the sidebar, but keeps them archived locally so you can restore them later.",
		"settings.archiveAll.confirmTitle": "Delete all chats?",
		"settings.archiveAll.confirmBody": "This will remove all chats from the sidebar. They will remain archived locally (not permanently deleted).",
			"modelPicker.pricing": "Pricing",
			"modelPicker.filter.all": "All",
			"modelPicker.filter.free": "Free",
			"modelPicker.filter.paid": "Paid",
			"modelPicker.searchPlaceholder": "Search a model…",
			"modelPicker.empty": "No models",
			"modelPicker.emptySearch": "No models found",
			"modelPicker.loading": "Loading…",
			"modelPicker.badge.free": "Free",
			"modelPicker.badge.paid": "Paid",
			"modelPicker.badge.favorite": "Favorite",
			"modelPicker.badge.recent": "Recent",
			"modelPicker.section.favorites": "Favorites",
			"modelPicker.section.recent": "Recent",
			"modelPicker.price.in": "In",
			"modelPicker.price.out": "Out",
	},
	fr: {
		"app.name": "Greg",
		"app.subtitle": "Agent IA",
		"actions.usages": "Usages",
		"actions.settings": "Paramètres",
		"actions.newChat": "Nouvelle conversation",
		"actions.search": "Rechercher",
		"actions.copy": "Copier",
		"actions.copied": "Copié",
		"actions.cancel": "Annuler",
		"actions.restore": "Restaurer",
		"actions.deleteAll": "Supprimer tous les chats",
		"actions.exportChat": "Exporter la conversation (Markdown)",
		"actions.restartFromHere": "Repartir d'ici",
		"actions.stop": "Stop",
		"sidebar.searchPlaceholder": "Rechercher une conversation…",
		"sidebar.empty": "Aucune conversation",
		"sidebar.emptySearch": "Aucune conversation trouvée",
		"sidebar.untitled": "Sans titre",
		"sidebar.group.today": "Aujourd'hui",
		"sidebar.group.yesterday": "Hier",
		"sidebar.group.thisWeek": "Cette semaine",
		"sidebar.group.older": "Plus ancien",
		"sidebar.archived": "Archives",
		"sidebar.show": "Afficher",
		"sidebar.hide": "Masquer",
		"sidebar.lastUpdated": ({ minutes, hours, days }) => {
			if (typeof minutes === "number") return `Il y a ${minutes}min`;
			if (typeof hours === "number") return `Il y a ${hours}h`;
			if (typeof days === "number") return `Il y a ${days}j`;
			return "";
		},
		"composer.model": "Modèle",
		"composer.placeholder": "Écris ton message à Greg…",
		"composer.hint.send": "envoyer",
		"composer.hint.newline": "ligne",
		"composer.thinking": "Greg réfléchit…",
		"thread.welcome.title": "Salut, c'est Greg !",
		"thread.welcome.subtitle": "Je suis ton agent IA personnel. Pose-moi une question ou confie-moi une tâche.",
		"settings.title": "Paramètres",
		"settings.subtitle": "Configure le comportement de Greg",
		"settings.language": "Langue de l'interface",
		"settings.personality": "Personnalité",
		"settings.personality.help": "Choisis 1 option par catégorie (modifiable à tout moment).",
		"settings.tone": "Ton",
		"settings.verbosity": "Verbosity",
		"settings.guidance": "Guidance",
		"settings.playfulness": "Playfulness",
		"settings.guidance.neutral.title": "Neutral",
		"settings.guidance.neutral.desc": "Questions seulement si nécessaire.",
		"settings.guidance.coach.title": "Coach",
		"settings.guidance.coach.desc": "Accompagne étape par étape et valide l'avancement.",
		"settings.instructions": "Instructions personnalisées (optionnel)",
		"settings.instructions.help": "Elles sont ajoutées aux instructions de base obligatoires.",
		"settings.save": "Enregistrer",
		"settings.reset": "Vider",
		"settings.data.title": "Données",
		"settings.data.subtitle": "Gérer les conversations locales",
		"settings.archiveAll.help": "Retire tous les chats du menu, mais conserve les données en archive localement pour pouvoir les retrouver plus tard.",
		"settings.archiveAll.confirmTitle": "Supprimer tous les chats ?",
		"settings.archiveAll.confirmBody": "Cela va retirer toutes les conversations du menu. Elles resteront archivées localement (pas de suppression définitive).",
			"modelPicker.pricing": "Prix",
			"modelPicker.filter.all": "Tous",
			"modelPicker.filter.free": "Gratuit",
			"modelPicker.filter.paid": "Payant",
			"modelPicker.searchPlaceholder": "Rechercher un modèle…",
			"modelPicker.empty": "Aucun modèle",
			"modelPicker.emptySearch": "Aucun modèle trouvé",
			"modelPicker.loading": "Chargement…",
			"modelPicker.badge.free": "Gratuit",
			"modelPicker.badge.paid": "Payant",
			"modelPicker.badge.favorite": "Favori",
			"modelPicker.badge.recent": "Récent",
			"modelPicker.section.favorites": "Favoris",
			"modelPicker.section.recent": "Récents",
			"modelPicker.price.in": "Entrée",
			"modelPicker.price.out": "Sortie",
	},
};

export function t(lang: UiLanguage, key: string, params?: Record<string, unknown>): string {
	const value = DICT[lang]?.[key] ?? DICT[DEFAULT_UI_LANGUAGE][key] ?? key;
	if (typeof value === "function") return value(params ?? {});
	return value;
}
